{"ast":null,"code":"import React from'react';import{Navigate,useLocation}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{Box,CircularProgress}from'@mui/material';import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children,allowedRoles=[]}=_ref;const{isAuthenticated,user,loading}=useAuth();const location=useLocation();if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"100vh\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(!isAuthenticated){return/*#__PURE__*/_jsx(Navigate,{to:\"/login\",state:{from:location},replace:true});}// Se não há roles específicas definidas, qualquer usuário autenticado pode acessar\nif(allowedRoles.length===0){return/*#__PURE__*/_jsx(_Fragment,{children:children});}// Verificar se o usuário tem uma das roles permitidas\nif(user&&allowedRoles.includes(user.tipo)){return/*#__PURE__*/_jsx(_Fragment,{children:children});}// Se o usuário não tem permissão, redirecionar para o dashboard\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});};export default ProtectedRoute;","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","Box","CircularProgress","jsx","_jsx","Fragment","_Fragment","ProtectedRoute","_ref","children","allowedRoles","isAuthenticated","user","loading","location","display","justifyContent","alignItems","minHeight","to","state","from","replace","length","includes","tipo"],"sources":["/home/maria/Documentos/faculdade/ttpe/ia/clinicaMedica_TTPE/web/src/components/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { Box, CircularProgress } from '@mui/material';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  allowedRoles?: string[];\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ \n  children, \n  allowedRoles = [] \n}) => {\n  const { isAuthenticated, user, loading } = useAuth();\n  const location = useLocation();\n\n  if (loading) {\n    return (\n      <Box \n        display=\"flex\" \n        justifyContent=\"center\" \n        alignItems=\"center\" \n        minHeight=\"100vh\"\n      >\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // Se não há roles específicas definidas, qualquer usuário autenticado pode acessar\n  if (allowedRoles.length === 0) {\n    return <>{children}</>;\n  }\n\n  // Verificar se o usuário tem uma das roles permitidas\n  if (user && allowedRoles.includes(user.tipo)) {\n    return <>{children}</>;\n  }\n\n  // Se o usuário não tem permissão, redirecionar para o dashboard\n  return <Navigate to=\"/\" replace />;\n};\n\nexport default ProtectedRoute; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CACxD,OAASC,OAAO,KAAQ,yBAAyB,CACjD,OAASC,GAAG,CAAEC,gBAAgB,KAAQ,eAAe,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAOtD,KAAM,CAAAC,cAA6C,CAAGC,IAAA,EAGhD,IAHiD,CACrDC,QAAQ,CACRC,YAAY,CAAG,EACjB,CAAC,CAAAF,IAAA,CACC,KAAM,CAAEG,eAAe,CAAEC,IAAI,CAAEC,OAAQ,CAAC,CAAGb,OAAO,CAAC,CAAC,CACpD,KAAM,CAAAc,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9B,GAAIc,OAAO,CAAE,CACX,mBACET,IAAA,CAACH,GAAG,EACFc,OAAO,CAAC,MAAM,CACdC,cAAc,CAAC,QAAQ,CACvBC,UAAU,CAAC,QAAQ,CACnBC,SAAS,CAAC,OAAO,CAAAT,QAAA,cAEjBL,IAAA,CAACF,gBAAgB,GAAE,CAAC,CACjB,CAAC,CAEV,CAEA,GAAI,CAACS,eAAe,CAAE,CACpB,mBAAOP,IAAA,CAACN,QAAQ,EAACqB,EAAE,CAAC,QAAQ,CAACC,KAAK,CAAE,CAAEC,IAAI,CAAEP,QAAS,CAAE,CAACQ,OAAO,MAAE,CAAC,CACpE,CAEA;AACA,GAAIZ,YAAY,CAACa,MAAM,GAAK,CAAC,CAAE,CAC7B,mBAAOnB,IAAA,CAAAE,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,CACxB,CAEA;AACA,GAAIG,IAAI,EAAIF,YAAY,CAACc,QAAQ,CAACZ,IAAI,CAACa,IAAI,CAAC,CAAE,CAC5C,mBAAOrB,IAAA,CAAAE,SAAA,EAAAG,QAAA,CAAGA,QAAQ,CAAG,CAAC,CACxB,CAEA;AACA,mBAAOL,IAAA,CAACN,QAAQ,EAACqB,EAAE,CAAC,GAAG,CAACG,OAAO,MAAE,CAAC,CACpC,CAAC,CAED,cAAe,CAAAf,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}